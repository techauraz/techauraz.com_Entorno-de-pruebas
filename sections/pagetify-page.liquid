<!-- THE SECTION AUTO-GENERATED BY PAGETIFY, PLEASE DO NOT MODIFY. -->

{% assign pageKey = 'pagetify-page-' | append: section.settings.type %}

{% if section.settings.type == 'landing' %}
  {% assign pageKey = 'pagetify-page-' | append: page.id %}
{% endif %}

{% if section.settings.type == 'article' %}
  {% assign pageKey = 'pagetify-article-' | append: article.id %}
{% endif %}

<div class="pe-content {{section.settings.width}}">
  <link rel="stylesheet" href="{{ pageKey | append: '.css' | asset_url }}">

  {% if section.settings.type == 'article' %}
    {% assign currentArticle = article %}
  {% endif %}

  {% capture pagetifyWidget %}{% include pageKey %}{% endcapture %}
  
  {% unless pagetifyWidget contains "Liquid error" %}
    {{ pagetifyWidget }}
  {% endunless %}

  {% if section.settings.type == 'article' %}
    {% assign article = currentArticle %}
  {% endif %}

  <script defer src="{{ pageKey | append: '.js' | asset_url }}"></script>
</div>

{% schema %}
  {
    "name": "Pagetify page",
    "settings": [
      {
        "type": "header",
        "content": "The Section Auto-generated by [Pagetify](https:\/\/apps.shopify.com/pagetify)."
      }, {
        "type": "header",
        "content": "Configured",
        "info": "Please do not change any configuration in this section."
      }, {
        "type": "select",
        "id": "type",
        "label": "Type",
        "default": "preview",
        "options": [
          {
            "value": "index",
            "label": "Home"
          },
          {
            "value": "landing",
            "label": "Landing"
          },
          {
            "value": "article",
            "label": "Blog Post"
          },
          {
            "value": "cart",
            "label": "Cart"
          }, {
            "value": "404",
            "label": "404"
          }, {
            "value": "password",
            "label": "Passowrd"
          }, {
            "value": "preview",
            "label": "Preview"
          }
        ]
      }, {
        "type": "select",
        "id": "width",
        "label": "Width",
        "default": "boxed",
        "options": [
          {
            "value": "",
            "label": "Auto"
          }, {
            "value": "boxed",
            "label": "Boxed"
          }
        ]
      },{
        "type": "header",
        "content": "Preview Guide",
        "info": "For ‘Landing’ or ‘Blog post’ types, select a Pagetify-created page to preview. See [the screenshot](https://cdn.shopify.com/s/files/1/0664/4498/4552/files/pagetify-page-preview-guide.jpg?v=1715453133) for details."
      }
    ]
  }
{% endschema %}